\chapter{Annex 1: PerfExpert Options}
\label{ch:ch06_perfexpert_options}

There are several different options for applying PerfExpert. The following summary shows you how to choose the options to run PerfExpert to match your needs.

\begin{prompt}
%\shellcmd{perfexpert -h}%
Usage: perfexpert [OPTION...] THRESHOLD PROGRAM [PROGRAM ARGUMENTS]
PerfExpert -- an easy-to-use automatic performance diagnosis and optimization tool for HPC applications
 THRESHOLD           Threshold (relevance %\%% of runtime) to take hotspots into
                     consideration (range: between 0 and 1, accepts fraction)
 PROGRAM             Program (binary) to analyze (do not use shell scripts)
 PROGRAM ARGUMENTS   Program arguments, see documentation if any argument
                     starts with a dash sign ('-')
%\strong{Automatic optimization options:}%
 -m, --target=TARGET        Use GNU standard 'make' command to compile the
                            code (it will run in the current directory)
 -s, --source=FILE          Set the source code file (does not work with
                            multiple files, choose -m option instead)
Use CC, CFLAGS, CPPFLAGS and LDFLAGS to set compiler/linker options
%\strong{Target program execution options:}%
 -a, --after=COMMAND        Command to execute after each run of the target
                            program
 -b, --before=COMMAND       Command to execute before each run of the target
                            program
 -i, --inputfile=FILE       Input file to the target program. Use this option
                            instead of input pipe redirect ('<'). Output pipe
                            ('>') is not available because PerfExpert already
                            set a default output file
 -p, --prefix=PREFIX        Add a prefix to the command line, use double
                            quotes to set arguments with spaces within (e.g.
                            -p "mpirun -n 2")
Output formating options:
 -c, --colorful             Enable ANSI colors
 -o, --order=relevance/performance/mixed
                            Order in which hotspots should be sorted (default:
                            unsorted)
 -r, --recommendations=COUNT   Number of recommendations PerfExpert should
                            provide (default: 3)
 -v, -l, --verbose=LEVEL, --verbose-level=LEVEL
                            Enable verbose mode (default: 5, range: 0-10)
Other options:
 -d, --database=FILE        Select a recommendation database file different
                            from the default
 -e, --only-experiments     Tell PerfExpert to not perform any analysis just
                            run the target program (for further manual
                            analysis)
 -g, --leave-garbage        Do not remove temporary directory when finalize
 -n, --do-not-run           Do not run PerfExpert, just parse the command line
                            (for debugging)
 -t, --measurement-tool=hpctoolkit/vtune
                            Set the tool that should be used to collect
                            performance counter values (default: hpctoolkit)
Informational options:
 -?, --help                 Give this help list
     --usage                Give a short usage message
 -V, --version              Print program version
Mandatory or optional arguments to long options are also mandatory or optional
for any corresponding short options.
Report bugs to PerfExpert mailing list: perfexpert@lists.tacc.utexas.edu.
\end{prompt}

