\chapter{Instance types and flavors}

VSC Tier1 Cloud provides several virtual machine instance types
and flavors to fit different use cases.
Each instance type provides several flavor sizes to give different
combinations of CPU, memory, GPU and network resource.

\section{Instance Types}\label{sec:instance-types}
The following table provides the current main instance types available
from VSC Tier1 Cloud infrastructure:

\begin{table}[h!]
\centering
\begin{tabular}{ |p{6cm}|p{4cm}|p{5cm}| }
  \hline
  \rowcolor{lightgray} \textbf{UPSv1} & \textbf{CPUv1} & \textbf{GPUv1} \\
  \hline
  \begin{itemize}
    \item AMD Epyc 7542 2.9GHz
    \item vCPU oversubscription 2:1
    \item 25Gbit Ethernet
    \item Uninterruptible Power Supply (UPS)
  \end{itemize}
  &
  \begin{itemize}
    \item Intel Xeon CPU E5-2670 2.60GHz
    \item 10Gbit Ethernet
  \end{itemize}
  &
  \begin{itemize}
    \item AMD Epyc 7542 2.9GHz
    \item 25Gbit Ethernet
    \item NVIDIA Tesla 4 GPU
  \end{itemize}
  \\
  \hline
\end{tabular}
\caption{Instance types hardware profiles}
\label{table:instance-type}
\end{table}

Each instance type is appropriate for different workloads. From regular 
CPU usage (\strong{CPUv}\emph{<version>} instance types), to high performance 
GPU computations (\strong{GPUv}\emph{<version>}) or VMs connected to 
uninterruptible power supplies (\strong{UPSv}\emph{<version>}). VMs using UPS 
flavor types will be keep up and running even if the data centre suffers
an unexpected power cut.

VSC Tier-1 Cloud instance types also provide different kind of network
performance specifications. All the instance types are able to connect
to the available networks: public network, VSC network and shared filesystem
network (NFS). VSC and shared file system networks are only available
by project's request.

VSC network gives an optimal path towards other VSC sites (ideal for high
perfomance connections between different clusters and services within VSC).

\strong{Note:} Cloud projects should request VSC network if they want to
connect to VSC Data component (\url{https://www.vscentrum.be/data}) with iRODS
and Globus from their Tier1 Cloud VMs.

On the other hand, the shared filesystem network is required by the OpenStack
shared filesystem service (Manila) (see chapter \ref{cha:shared-file-systems}
for more information).


\section{Flavor Sizes}\label{sec:flavor-sizes}
A flavor size is a set of virtualized hardware resouces to a virtual
machine (VM) instance like system memory size, virtual CPU (vCPU)
or the root filesystem size. 

The flavor's root size is the amount of disk space
used by the root (\emph{/}) partition, an ephemeral disk that the
base image is copied into (see section \ref{launch-an-instance} for
more information about VM persistent/non-persistent instances).

The flavor's root ephemeral storage is only used when booting from
a non-persistent VM but not from a persistent storage volume or
persistent VM.
The flavor's root ephemeral size is not taken into account to
calculate the project's local storage quota either. You can also
create a persistent volume and choose the desired filesystem size for
your persistent VM during the instantiation.
VM persistent volumes could be resized later if that is necessary
(see next chapter \ref{cha:launch-manage-inst} for more information).

VSC Tier-1 Cloud VM flavors are grouped by instance types
(see table \ref{table:instance-type}). The current flavor sizes are
available for each instance type and can be used in different
combinations to fit different workload hardware requirements.

\begin{table}[h!]
\centering
\begin{tabular}{ |p{3cm}|p{3cm}|p{3cm}|p{3cm}| }
  \hline
  \rowcolor{lightgray} \textbf{Flavor Size} & \textbf{RAM} & \textbf{Root Disk} & \textbf{vCPUs} \\
  \hline
  small & 2Gb & 20Gb & 1 \\
  \hline
  medium & 4Gb & 30Gb & 2 \\
  \hline
  large & 8Gb & 40Gb & 4 \\
  \hline
  xlarge & 16Gb & 40Gb & 8 \\
  \hline
  1\_2xlarge & 62Gb & 40Gb & 8 \\
  \hline
  2xlarge & 62Gb & 40Gb & 16 \\
  \hline
  1\_3xlarge & 180Gb & 80Gb & 14 \\
  \hline
  3xlarge & 120Gb & 80Gb & 16 \\
  \hline
  4xlarge & 360Gb & 80Gb & 20 \\
  \hline
\end{tabular}
\caption{Flavor sizes}
\label{table:flavor-size}
\end{table}

The current VSC Tier-1 Cloud flavors list is available from section \ref{sec:appendix-flavors}.

E.g. \strong{GPUv1}.\emph{large} OpenStack flavor will instantiate a
VM with 4 AMD Epyc 7542 2.9GHz CPUs, with a NVIDIA Tesla 4 GPU, 8GB
of ram, 40Gb of root disk and connected to the UPS.

\strong{Note:} New Tier-1 VSC Cloud projects should take into account
these flavor sizes in order to request their required resources and quota.
For instance, a new project needs 2 VMs with \emph{xlarge} flavor,
in that case the project should request 32Gb of ram and 16 Cores in total
to deploy their infrastructure.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "intro-Cloud"
%%% End:
